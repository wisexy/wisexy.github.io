<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>数据库基础概念 | Apocalyptica</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.3.0"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=1.3.0"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">数据库基础概念</h1><a id="logo" href="/.">Apocalyptica</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">数据库基础概念</h1><div class="post-meta">Mar 17, 2018<span> | </span><span class="category"><a href="/categories/数据库/">数据库</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h3 id="关系模型部分"><a href="#关系模型部分" class="headerlink" title="关系模型部分"></a>关系模型部分</h3><p>1.关系数据库由表（table）的集合组成。</p>
<p>2.<strong>关系</strong>（relation）用来指代表，<strong>元组</strong>（tuple）用来指代行，<strong>属性</strong>（attribute）用来指代列。</p>
<p>3.<strong>超码</strong>是一个或多个属性的结合，这些属性的组合可以使我们在一个关系中唯一地标识一个元组。如果集合K是超码，那么K的任意超集也是超码，也就是超码中可能夹杂“无用”的属性，因此通常更关心最小的超码，最小超码称为<strong>候选码</strong>。</p>
<p>4.我们用<strong>主码</strong>这个术语来代表被数据库设计者选中的用来在一个关系中区分不同元组的候选码。习惯上，一个关系的主码属性列在其他属性前面。</p>
<p>5.一个关系（如r1）可能在它的属性中包括另一个关系模式（如r2）的主码，则该属性在r1上称作参照r2的<strong>外码</strong>。关系r1也称为外码依赖的<strong>参照关系</strong>，r2叫做外码的<strong>被参照关系</strong>。</p>
<p>6.默认情况下，SQL中外码参照的是被参照关系中的主码属性，同时SQL也可以手动显示地指定被参照关系属性列表的references子句，但该属性列表必须是被参照关系的候选码。</p>
<p>&nbsp;</p>
<h3 id="初级SQL"><a href="#初级SQL" class="headerlink" title="初级SQL"></a>初级SQL</h3><p>1.定义关系时需要用的常见的完整性约束：</p>
<table>
<thead>
<tr>
<th>SQL语句</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>primary key(属性1,属性2,…,属性n)</td>
<td>声明关系的主码为(属性1,属性2,…,属性n)</td>
</tr>
<tr>
<td>foreign key(属性1,属性2,…,属性n)</td>
<td>声明关系中所有元组在属性1,属性2,…,属性n上的取值必须对应于关系s中某元组在主码属性上的取值</td>
</tr>
<tr>
<td>not null</td>
<td>作用于属性，写在属性后方，表明该属性不允许空值</td>
</tr>
</tbody>
</table>
<p>2.<code>drop table r</code> 删除关系r，<code>delete from r</code> 只删除r中所有元组。</p>
<p>3.多关系SQL查询通用形式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> A1,A2,……,An</div><div class="line"><span class="keyword">from</span> r1,r2,……,rm</div><div class="line"><span class="keyword">where</span> P;</div></pre></td></tr></table></figure>
<p>4.<strong>自然连接</strong>运算作用于两个关系，并产生一个关系作为结果。不同于两个关系上的笛卡尔积，自然连接只考虑那些在两个关系模式中都出现的属性上取值相同的元组对。（例如r1(A,B)，r2(B,C)，自然连接后为：r(A,B,C)）</p>
<p>5.<strong>as</strong>更名运算<code>old-name as new-name</code> </p>
<p>6.<strong>like</strong>操作符来实现模式匹配。百分号(%)代表任意字符串（可能为空），下划线(_)代表任意一个字符。</p>
<p>7.集合运算：并（union）、交（intersect）、差（except），例如对两个查询结果取并集：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> A <span class="keyword">from</span> r1 <span class="keyword">where</span> P</div><div class="line"><span class="keyword">union</span></div><div class="line"><span class="keyword">select</span> B <span class="keyword">from</span> r2 <span class="keyword">where</span> P</div></pre></td></tr></table></figure>
<p>注意要区别于逻辑运算：与（and）、或（or）、非（not）。</p>
<p>8.聚集函数：类似于<strong>avg()</strong>、<strong>max()</strong>、<strong>count()</strong>等，如果不希望聚类函数作用于单个元组集上，可以使用<strong>group by</strong>子句实现分组聚集。例如“找出每个系的平均工资”这个意图可以使用以下实现：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> dept_name, <span class="keyword">avg</span>(salary) <span class="keyword">as</span> avg_salary</div><div class="line"><span class="keyword">from</span> instructor</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> dept_name</div></pre></td></tr></table></figure>
<p>9.<strong>having</strong>子句：略。</p>
<p>10.<strong>with</strong>子句提供定义临时关系的方法，这个定义只对包含with子句的查询有效。使用方式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">with r(A) as</div><div class="line">	(<span class="keyword">select</span> <span class="keyword">max</span>(A) <span class="keyword">from</span> r1)</div><div class="line"><span class="keyword">select</span> A</div><div class="line"><span class="keyword">from</span> r, r1</div><div class="line"><span class="keyword">where</span> P;</div></pre></td></tr></table></figure>
<p>使用 <code>(select max(A) from r1)</code> 得到临时关系<code>r(A)</code> ，并将r(A)用在后续的查询中。</p>
<p>10.隐式的连接相当于作笛卡尔积，例如<code>select * from r1, r2;</code> 。</p>
<p>11.一般在on子句中指定连接条件，在where子句中出现其余的条件。</p>
<p>12.外连接（outer join）可以保留值为空的元组。例如：一个学生没有选修任何课程，那么在student关系中的元组与takes关系中的元组配对是与该生有关的元组会不满足自然连接的条件，导致结果中不会出现该生的结果。如果希望结果中出现该生，则需要使用外连接。不保留未匹配元组的连接运算被称作内连接（inner join）。</p>
<p>13.外连接分为三种：</p>
<p><1>左外连接（left outer join）：只保留出现在左外链接运算左边的关系中的元组。</1></p>
<p><2>右外连接（right outer join）：只保留出现在右外链接运算右边的关系中的元组。</2></p>
<p><3>全外连接（full outer join）：保留出现在两个关系中的元组。</3></p>
<p>14.整个逻辑模型暴露给所有用户是不恰当的，处于安全考虑需要隐藏特点的数据。SQL允许通过查询定义“虚关系”，它在概念上包含查询的结果，虚关系并不预先计算并存储，而是<strong>使用时才通过执行查询被计算出来</strong>。此类不是逻辑模型一部分但作为虚关系对用户可见的关系称为<strong>视图</strong>。</p>
<p>视图的定义方式：<code>create view view1 as select A, B from r1, r2;</code> 。</p>
<p>15.<strong>事务</strong> （transaction）由查询和（或）更新语句的序列组成。SQL标准规定当一条SQL语句被执行，就隐式地开始了一个事务。结束一个事务仅可能由于提交（Commit）当前事务或回滚（Rollback）当前事务。默认方式下，每个SQL语句自动成一个事务，一旦执行完就提交。如果一个事务要执行多条SQL语句，就必须关闭单独SQL语句的自动提交。</p>
<p>16.一致性约束：规定数据库中的数据必须符合某种一致性条件，保证用户对数据库所做的修改不会破坏数据的一致性。当需要增加一个已有关系的完整性约束时，首先要保证关系满足该约束，若不满足则拒绝执行上述命令。</p>
<p>17.单个关系上的约束有：<code>属性名 类型名 not null</code>、<code>unique(属性1,属性2,…)</code>、<code>check(P)</code>。</p>
<p>18.参照完整性：保证在一个关系中给定属性上的取值也在另一个关系的特定属性集的取值中出现，这种情况称为参照完整性。</p>
<p>19.索引是在关系模式上创建的一种数据结构，他允许数据库系统高效地找到关系中那些在索引属性上取给定的元组，而不用扫描关系中的所有元组。如果用户调教的SQL查询能从索引中获益，那么SQL会自动使用索引。</p>
<p>在关系r的A属性上创建索引的语法形式是：<code>create index your_index_name on r(A);</code>。</p>
<p>20.SQL标准包括select、insert、update、delete权限。一个创建了新关系的用户将自动被授予该关系上的所有权限。权限的授予（收回）语法形式为：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">grant</span>(<span class="keyword">revoke</span>) &lt;权限列表&gt;</div><div class="line"><span class="keyword">on</span> &lt;关系名或视图名&gt;</div><div class="line"><span class="keyword">to</span> &lt;用户/角色列表&gt;</div></pre></td></tr></table></figure>
<p>21.角色是一类用户，可以直接向角色授予（收回）权限来批量维护权限。角色可以授予给用户。</p>
<p>创建角色的语法：<code>create role role1;</code></p>
<p>将角色授予给用户的语法：<code>grant role1 to user1;</code></p>
<p>22.触发器是一条语句，当对数据库修改时，它自动被系统执行。触发器是一种非常有用的机制，用来满足特定条件时对用户发警报或自动开始执行某种任务。</p>
<h3 id="常见面试题"><a href="#常见面试题" class="headerlink" title="常见面试题"></a>常见面试题</h3><p>1.数据库事务的四个特性（ACID）及含义：</p>
<p><strong>原子性</strong>（Atomicity）：整个事务中的所有操作，要么全部完成要么全部不完成，若发送错误则回滚，执行完成则提交。</p>
<p><strong>一致性</strong>（Correspondence）：事务前后完整性约束不被破坏。</p>
<p><strong>隔离性</strong>（Isolation）：状态执行事务，使它们好像是<a href="http://www.2cto.com/os/" target="_blank" rel="external">系统</a>在给定时间内执行的唯一操作。如果有两个事务，运行在相同的时间内，执行相同的功能，事务的隔离性将确保每一事务在系统中认为只有该事务在使用系统。这种属性有时称为串行化，为了防止事务操作间的混淆，必须串行化或序列化请求，使得在同一时间仅有一个请求用于同一数据。</p>
<p><strong>持久性</strong>（Durability）：事务完成以后，该事务所对数据库所作的更改便持久的保存在数据库之中，并不会被回滚。</p>
<p>&nbsp;</p>
<p>2.视图可以更改吗？</p>
<p>视图主要用于简化检索，保护数据，并不用于更新，而且大部分视图都不可以更新。</p>
</div><div class="tags"><a href="/tags/数据库/">数据库</a></div><div class="post-nav"><a href="/2018/04/09/《Effective C++》整理/" class="pre">《Effective C++》整理</a><a href="/2018/03/14/排序算法经典实现/" class="next">排序算法经典实现</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="widget"><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字..."/></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> Kategorien</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">LeetCode</a><span class="category-list-count">29</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/排序算法/">排序算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂文/">杂文</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程经验/">编程经验</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络/">网络</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/面试/">面试</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"><a href="/tags/搜索/" style="font-size: 15px;">搜索</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/作用域/" style="font-size: 15px;">作用域</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/协议/" style="font-size: 15px;">协议</a> <a href="/tags/网络/" style="font-size: 15px;">网络</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/泛型/" style="font-size: 15px;">泛型</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a> <a href="/tags/LeetCode/" style="font-size: 15px;">LeetCode</a> <a href="/tags/二叉树/" style="font-size: 15px;">二叉树</a> <a href="/tags/链表/" style="font-size: 15px;">链表</a> <a href="/tags/栈/" style="font-size: 15px;">栈</a> <a href="/tags/图/" style="font-size: 15px;">图</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/位运算/" style="font-size: 15px;">位运算</a> <a href="/tags/快速幂/" style="font-size: 15px;">快速幂</a> <a href="/tags/字符串/" style="font-size: 15px;">字符串</a> <a href="/tags/DP/" style="font-size: 15px;">DP</a> <a href="/tags/数组/" style="font-size: 15px;">数组</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/quagga/" style="font-size: 15px;">quagga</a> <a href="/tags/ldp/" style="font-size: 15px;">ldp</a> <a href="/tags/编程经验/" style="font-size: 15px;">编程经验</a> <a href="/tags/陷阱/" style="font-size: 15px;">陷阱</a> <a href="/tags/TCP-IP详解/" style="font-size: 15px;">TCP/IP详解</a> <a href="/tags/数据库/" style="font-size: 15px;">数据库</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-fei"> Archiv</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/07/04/《Effective Java》整理/">《Effective Java》整理</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/18/面试问题整理（Java方向）/">面试问题整理（Java方向）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/18/Java面试点/">Java面试点</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/18/Java语法点/">Java语法点</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/12/C++中local static对象与non-local static对象的概念与区别/">C++中local static对象与non-local static对象的概念与区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/09/《Effective C++》整理/">《Effective C++》整理</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/17/数据库基础概念/">数据库基础概念</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/14/排序算法经典实现/">排序算法经典实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/11/LeetCode 105 Construct Binary Tree from Preorder and Inorder Traversal/">LeetCode 105. Construct Binary Tree from Preorder and Inorder Traversal</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/08/LeetCode 142 Linked List Cycle II/">LeetCode 142. Linked List Cycle II</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.3.0" async></script><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |<a href="/atom.xml">订阅本站</a> |<span>联系博主：<a href="mailto:null" target="_blank" class="fa fa-email"> </a><a href="null" target="_blank" class="fa fa-weibo"></a><a href="null" target="_blank" class="fa fa-github"> </a></span></p><p><span> Copyright &copy;<a href="/." rel="nofollow">John Doe</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span><span><a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> Theme </a>by<a rel="nofollow" target="_blank" href="https://github.com/chaooo"> Charles.</a></span></p></div></div></div><script type="text/javascript" src="/js/search.json.js?v=1.3.0"></script></body></html>